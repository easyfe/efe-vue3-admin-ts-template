var e=Object.defineProperty,o=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(o,n,a)=>n in o?e(o,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[n]=a,s=(e,o)=>{for(var n in o||(o={}))t.call(o,n)&&l(e,n,o[n]);if(a)for(var n of a(o))i.call(o,n)&&l(e,n,o[n]);return e},p=(e,a)=>o(e,n(a));import{_ as r,t as u,Q as c,B as d}from"./index-da319c9d.js";/* empty css              */import{aF as f,g as v,i as m,B as A}from"./ui-953f2acd.js";import{e as M,a5 as g,A as h,c as w,w as y,o as b,f as I,h as k,j as L,k as U,l as x,a9 as _,aa as C,i as P,r as O,R as j,m as N,G as S,v as T,C as E,F,O as R,N as W,y as z,s as B,ac as D,ad as J}from"./core-f74cc8c6.js";import{b as $}from"./_baseIsEqual-248c520b.js";const H="/vue3-admin-ts-template/assets/location1-b7af9c91.png";var K={exports:{}};const Z=v(K.exports=function(){function e(e){var a=[];return e.AMapUI&&a.push(o(e.AMapUI)),e.Loca&&a.push(n(e.Loca)),Promise.all(a)}function o(e){return new Promise((function(o,n){var t=[];if(e.plugins)for(var p=0;p<e.plugins.length;p+=1)-1==i.AMapUI.plugins.indexOf(e.plugins[p])&&t.push(e.plugins[p]);if(l.AMapUI===a.failed)n("前次请求 AMapUI 失败");else if(l.AMapUI===a.notload){l.AMapUI=a.loading,i.AMapUI.version=e.version||i.AMapUI.version,p=i.AMapUI.version;var r=document.body||document.head,u=document.createElement("script");u.type="text/javascript",u.src="https://webapi.amap.com/ui/"+p+"/main.js",u.onerror=function(e){l.AMapUI=a.failed,n("请求 AMapUI 失败")},u.onload=function(){if(l.AMapUI=a.loaded,t.length)window.AMapUI.loadUI(t,(function(){for(var e=0,n=t.length;e<n;e++){var a=t[e].split("/").slice(-1)[0];window.AMapUI[a]=arguments[e]}for(o();s.AMapUI.length;)s.AMapUI.splice(0,1)[0]()}));else for(o();s.AMapUI.length;)s.AMapUI.splice(0,1)[0]()},r.appendChild(u)}else l.AMapUI===a.loaded?e.version&&e.version!==i.AMapUI.version?n("不允许多个版本 AMapUI 混用"):t.length?window.AMapUI.loadUI(t,(function(){for(var e=0,n=t.length;e<n;e++){var a=t[e].split("/").slice(-1)[0];window.AMapUI[a]=arguments[e]}o()})):o():e.version&&e.version!==i.AMapUI.version?n("不允许多个版本 AMapUI 混用"):s.AMapUI.push((function(e){e?n(e):t.length?window.AMapUI.loadUI(t,(function(){for(var e=0,n=t.length;e<n;e++){var a=t[e].split("/").slice(-1)[0];window.AMapUI[a]=arguments[e]}o()})):o()}))}))}function n(e){return new Promise((function(o,n){if(l.Loca===a.failed)n("前次请求 Loca 失败");else if(l.Loca===a.notload){l.Loca=a.loading,i.Loca.version=e.version||i.Loca.version;var t=i.Loca.version,p=i.AMap.version.startsWith("2"),r=t.startsWith("2");if(p&&!r||!p&&r)n("JSAPI 与 Loca 版本不对应！！");else{p=i.key,r=document.body||document.head;var u=document.createElement("script");u.type="text/javascript",u.src="https://webapi.amap.com/loca?v="+t+"&key="+p,u.onerror=function(e){l.Loca=a.failed,n("请求 AMapUI 失败")},u.onload=function(){for(l.Loca=a.loaded,o();s.Loca.length;)s.Loca.splice(0,1)[0]()},r.appendChild(u)}}else l.Loca===a.loaded?e.version&&e.version!==i.Loca.version?n("不允许多个版本 Loca 混用"):o():e.version&&e.version!==i.Loca.version?n("不允许多个版本 Loca 混用"):s.Loca.push((function(e){e?n(e):n()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var a,t;(t=a||(a={})).notload="notload",t.loading="loading",t.loaded="loaded",t.failed="failed";var i={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},l={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},s={AMap:[],AMapUI:[],Loca:[]},p=[],r=function(e){"function"==typeof e&&(l.AMap===a.loaded?e(window.AMap):p.push(e))};return{load:function(o){return new Promise((function(n,t){if(l.AMap==a.failed)t("");else if(l.AMap==a.notload){var s=o.key,u=o.version,c=o.plugins;s?(window.AMap&&"lbs.amap.com"!==location.host&&t("禁止多种API加载方式混用"),i.key=s,i.AMap.version=u||i.AMap.version,i.AMap.plugins=c||i.AMap.plugins,l.AMap=a.loading,u=document.body||document.head,window.___onAPILoaded=function(i){if(delete window.___onAPILoaded,i)l.AMap=a.failed,t(i);else for(l.AMap=a.loaded,e(o).then((function(){n(window.AMap)})).catch(t);p.length;)p.splice(0,1)[0]()},(c=document.createElement("script")).type="text/javascript",c.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+i.AMap.version+"&key="+s+"&plugin="+i.AMap.plugins.join(","),c.onerror=function(e){l.AMap=a.failed,t(e)},u.appendChild(c)):t("请填写key")}else if(l.AMap==a.loaded)if(o.key&&o.key!==i.key)t("多个不一致的 key");else if(o.version&&o.version!==i.AMap.version)t("不允许多个版本 JSAPI 混用");else{if(s=[],o.plugins)for(u=0;u<o.plugins.length;u+=1)-1==i.AMap.plugins.indexOf(o.plugins[u])&&s.push(o.plugins[u]);s.length?window.AMap.plugin(s,(function(){e(o).then((function(){n(window.AMap)})).catch(t)})):e(o).then((function(){n(window.AMap)})).catch(t)}else if(o.key&&o.key!==i.key)t("多个不一致的 key");else if(o.version&&o.version!==i.AMap.version)t("不允许多个版本 JSAPI 混用");else{var d=[];if(o.plugins)for(u=0;u<o.plugins.length;u+=1)-1==i.AMap.plugins.indexOf(o.plugins[u])&&d.push(o.plugins[u]);r((function(){d.length?window.AMap.plugin(d,(function(){e(o).then((function(){n(window.AMap)})).catch(t)})):e(o).then((function(){n(window.AMap)})).catch(t)}))}}))},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,i={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},l={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},s={AMap:[],AMapUI:[],Loca:[]}}}}()),q=r(M({__name:"index",props:{height:{},options:{default:()=>({viewMode:"3D",zoom:11,center:[116.397428,39.90923]})},mapType:{default:"NORMAL_MAP"},mapKey:{}},emits:["click"],setup(e,{expose:o,emit:n}){const a=e,t=n;let i=g(null);h("map",i),h("infoWindow",null);const l=w((()=>"number"==typeof a.height?{height:`${a.height}px`}:{height:a.height}));let s=null;return y((()=>a.mapType),(e=>{i.value&&("NORMAL_MAP"===e?i.value.removeLayer(s):i.value.addLayer(s))})),o({map:i}),b((()=>{Z.load({key:a.mapKey,version:"2.0",AMapUI:{version:"1.1",plugins:["overlay/SimpleMarker"]}}).then((()=>{const e=a.options;s=new AMap.TileLayer.Satellite,i.value=new AMap.Map("amap-container",e),i.value.on("click",(function(e){t("click",e)}))})).catch((e=>{console.error(e)}))})),I((()=>{var e;null==(e=i.value)||e.destroy()})),(e,o)=>(k(),L("div",{id:"amap-container",class:"amap-container",style:x(_(l))},[U(e.$slots,"default",{},void 0,!0)],4))}}),[["__scopeId","data-v-b0046bb8"]]),G={style:{display:"none"}},Q=M({__name:"index",props:{options:{default:()=>({content:""})}},emits:["dbclick","click","mouseover","mouseout"],setup(e,{emit:o}){const n=e,a=o,t=C(),i=P("map");let l;const s=O();let p;return j((()=>{var e,o,r;i&&i.value&&(o=p,r=n.options,$(o,r)||(l&&(i.value.remove(l),i.value.setCenter(n.options.position||[0,0])),p=u(n.options),(null==t?void 0:t.default)&&(p.label||(p.label={content:"",direction:"right",offset:[5,-15]}),p.label.content=(null==(e=s.value)?void 0:e.innerHTML)||""),l=new AMap.Marker(p),i.value.add(l),l.on("dblclick",(()=>{a("dbclick")})),l.on("click",(()=>{a("click")})),l.on("mouseover",(()=>{a("mouseover")})),l.on("mouseout",(()=>{a("mouseout")}))))})),(e,o)=>(k(),L("div",G,[N("div",{ref_key:"mapMarkerContainer",ref:s},[U(e.$slots,"default")],512)]))}}),V={style:{display:"none"}},X=M({__name:"index",props:{options:{default:()=>({content:""})}},emits:["dbclick","click","mouseover","mouseout"],setup(e,{emit:o}){const n=e,a=o,t=P("map"),i=O();return j((()=>{if(!t.value)return;let e=u(n.options);const o=new AMap.Text(e);o.setMap(t.value),o.on("dblclick",(()=>{a("dbclick")})),o.on("click",(()=>{a("click")})),o.on("mouseover",(()=>{a("mouseover")})),o.on("mouseout",(()=>{a("mouseout")}))})),(e,o)=>(k(),L("div",V,[N("div",{ref_key:"mapTextContainer",ref:i},null,512)]))}}),Y={style:{display:"none"}},ee=M({__name:"index",props:{options:{default:()=>({content:""})},show:{type:Boolean,default:!1}},emits:["infoShow","infoClose"],setup(e,{emit:o}){const n=e;C();const a=o,t=P("map"),i=O();let l=null,r=null,u=O("");j((()=>{n.show&&u.value?function(){if(!t.value)return;const e=n.options;l?(l.setContent(u.value),l.setPosition(e.position||t.value.getCenter())):l=new AMap.InfoWindow(p(s({},e),{content:u.value})),l.open(t.value,e.position||t.value.getCenter()),a("infoShow")}():(null==l||l.close(),a("infoClose"))}));const c=()=>{i.value&&(u.value=i.value.innerHTML)};return b((()=>{i.value&&(r=new MutationObserver(c),r.observe(i.value,{childList:!0,subtree:!0,characterData:!0}),c())})),S((()=>{r&&r.disconnect()})),(e,o)=>(k(),L("div",Y,[N("div",{ref_key:"mapInfoWindowContainer",ref:i},[U(e.$slots,"default")],512)]))}}),oe=e=>(D("data-v-52821e1b"),e=e(),J(),e),ne={class:"map-container"},ae={style:{display:"flex","flex-direction":"column",padding:"10px"}},te={style:{"font-weight":"bold","margin-bottom":"10px",color:"rgb(85, 85, 85)"}},ie={style:{display:"inherit","font-size":"12px",color:"rgb(85, 85, 85)"}},le={style:{width:"80px"}},se={class:"actions"},pe={class:"bottom-tips"},re={class:"tips-item"},ue=["src"],ce=oe((()=>N("div",null,"正常运行",-1))),de={class:"tips-item"},fe=["src"],ve=oe((()=>N("div",null,"告警运行",-1))),me={key:0,class:"map-dev"},Ae=M({name:"MapBox1"}),Me=r(M(p(s({},Ae),{props:{detail:{},dept:{}},setup(e){const o=O("NORMAL_MAP"),n=O(-1),a=O(!1),t=O("100%"),i=O([]),l=O([{title:"在线设备",value:0,suffix:"台",bgColor:"#2d76fe"},{title:"离线设备",value:0,suffix:"台",bgColor:"#ff1111"},{title:"待处理工单",value:0,suffix:"个",bgColor:"#ffb200"},{title:"待处理事件",value:0,suffix:"个",bgColor:"#4db8ff"}]),s=O();function p(){var e,o;console.log(null==(e=s.value)?void 0:e.map.getCenter()),console.log(null==(o=s.value)?void 0:o.map.getZoom())}return b((()=>{i.value=[{fullname:"南京市",longitude:"118.796877",latitude:"32.060255"},{fullname:"上海市",longitude:"121.472644",latitude:"31.231706"}]})),(e,r)=>{const u=m,f=A;return k(),L("div",ne,[T(_(q),{"map-key":"6cb85da518029607d421917b7ddeb94a",ref_key:"myMap",ref:s,"map-type":_(o),height:_(t),options:{zoom:5.37,center:[119.728933,32.333552]}},{default:E((()=>[(k(!0),L(F,null,R(_(i),((e,o)=>(k(),L(F,{key:e.fullname},[T(_(Q),{options:{position:[Number(e.longitude),Number(e.latitude)],size:[23,35],icon:_(H)},onDbclick:o=>{return n=e,void(null==(a=s.value)||a.map.setZoomAndCenter(15,[Number(n.longitude),Number(n.latitude)]));var n,a},onClick:e=>function(e,o){a.value=!0,n.value=o,setTimeout((()=>{a.value=!1}),1e3)}(0,o)},null,8,["options","onDbclick","onClick"]),T(_(X),{options:{position:[Number(e.longitude),Number(e.latitude)],text:e.fullname,offset:[25,0],style:{color:"#CC3333",fontSize:"13px",backgroundColor:"#CCFFFF",border:"0",fontWeight:"bold"}}},null,8,["options"]),T(_(ee),{show:_(n)===o,options:{position:[Number(e.longitude),Number(e.latitude)]}},{default:E((()=>[T(u,{loading:_(a)},{default:E((()=>[N("div",ae,[N("div",te,W(e.fullname),1),(k(!0),L(F,null,R(_(l),((e,o)=>(k(),L("div",{key:o,style:{display:"flex","align-items":"center","margin-bottom":"6px"}},[N("div",{style:x({width:"10px",height:"10px",background:e.bgColor+" !important",borderRadius:"0px",marginRight:"10px"})},null,4),N("div",ie,[N("span",le,W(e.title),1),N("span",null,W(e.value)+"("+W(e.suffix)+")",1)])])))),128))])])),_:2},1032,["loading"])])),_:2},1032,["show","options"])],64)))),128))])),_:1},8,["map-type","height"]),N("div",se,[T(_(c),{name:"map3",width:20,height:20,color:"SATELLITE_MAP"===_(o)?"#3366FF":"#000000",onClick:r[0]||(r[0]=e=>o.value="SATELLITE_MAP")},null,8,["color"]),T(_(c),{name:"map4",width:20,height:20,color:"NORMAL_MAP"===_(o)?"#3366FF":"#000000",onClick:r[1]||(r[1]=e=>o.value="NORMAL_MAP")},null,8,["color"])]),N("div",pe,[N("div",re,[N("img",{src:_(H),alt:""},null,8,ue),ce]),N("div",de,[N("img",{src:_("/vue3-admin-ts-template/assets/location2-80b725cd.png"),alt:""},null,8,fe),ve])]),_(d).dev()?(k(),L("div",me,[T(f,{type:"primary",onClick:p},{default:E((()=>[z("获取中心点和定位")])),_:1})])):B("",!0)])}}})),[["__scopeId","data-v-52821e1b"]]);export{Me as default};
