var t=Object.defineProperty,i=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(i,e,s)=>e in i?t(i,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[e]=s,h=(t,i,e)=>new Promise(((s,n)=>{var h=t=>{try{a(e.next(t))}catch(i){n(i)}},o=t=>{try{a(e.throw(t))}catch(i){n(i)}},a=t=>t.done?s(t.value):Promise.resolve(t.value).then(h,o);a((e=e.apply(t,i)).next())}));import{a as o,e as a,h as l,j as r,F as c,O as u,K as m,L as d,l as p,a9 as g,n as f,D as b,k as v,ae as x,c as y,r as w,a5 as M,m as L,N as z,q as R,C as k,M as T,v as H,z as S}from"./core-e904f21d.js";import{_ as $,A as N}from"./index-474d4c88.js";import{g as W}from"./index-38fba92e.js";import{e as P,E as C}from"./index-f6ea771a.js";import"./ui-3973d019.js";const D=o({vLine:[],hLine:[]}),A=t=>h(void 0,null,(function*(){D.vLine=t.vLine,D.hLine=t.hLine})),B=()=>({lineValue:D,setValue:A}),E=$(a({__name:"index",setup(t){const{lineValue:i}=B();return(t,e)=>(l(),r(c,null,[(l(!0),r(c,null,u(g(i).vLine,((t,i)=>m((l(),r("span",{key:i,class:"ref-line v-line",style:p({left:t.position,top:t.origin,height:t.lineLength})},null,4)),[[d,t.display]]))),128)),(l(!0),r(c,null,u(g(i).hLine,((t,i)=>m((l(),r("span",{key:i,class:"ref-line h-line",style:p({top:t.position,left:t.origin,width:t.lineLength})},null,4)),[[d,t.display]]))),128))],64))}}),[["__scopeId","data-v-2d8a283c"]]);function _(t){return"function"==typeof t||"[object Function]"===Object.prototype.toString.call(t)}function U(t,i,e,s=1){return[Math.round(i/s/t[0])*t[0],Math.round(e/s/t[1])*t[1]]}function O(t,i,e){return t-i-e}function V(t,i,e){return t-i-e}function Y(t,i,e){return null!==i&&t<i?i:null!==e&&e<t?e:t}function I(t,i,e){let s=t;const n=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].find((t=>_(s[t])));if(!_(s[n]))return!1;do{if(s[n](i))return!0;if(s===e)return!1;s=s.parentNode}while(s);return!1}function F(t,i,e){t&&(t.attachEvent?t.attachEvent("on"+i,e):t.addEventListener?t.addEventListener(i,e,!0):t["on"+i]=e)}function j(t,i,e){t&&(t.detachEvent?t.detachEvent("on"+i,e):t.removeEventListener?t.removeEventListener(i,e,!0):t["on"+i]=null)}const X={start:"mousedown",move:"mousemove",stop:"mouseup"},J={start:"touchstart",move:"touchmove",stop:"touchend"},K={userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",MsUserSelect:"none"},q={userSelect:"auto",MozUserSelect:"auto",WebkitUserSelect:"auto",MsUserSelect:"auto"};let G=X;const Q={replace:!0,name:"VueDraggableResizable",props:{className:{type:String,default:"vdr"},classNameDraggable:{type:String,default:"draggable"},classNameResizable:{type:String,default:"resizable"},classNameDragging:{type:String,default:"dragging"},classNameResizing:{type:String,default:"resizing"},classNameActive:{type:String,default:"active"},classNameHandle:{type:String,default:"handle"},disableUserSelect:{type:Boolean,default:!0},enableNativeDrag:{type:Boolean,default:!1},preventDeactivation:{type:Boolean,default:!1},active:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},lockAspectRatio:{type:Boolean,default:!1},w:{type:[Number,String],default:200,validator:t=>"number"==typeof t?t>0:"auto"===t},h:{type:[Number,String],default:200,validator:t=>"number"==typeof t?t>0:"auto"===t},minWidth:{type:Number,default:0,validator:t=>t>=0},minHeight:{type:Number,default:0,validator:t=>t>=0},maxWidth:{type:Number,default:null,validator:t=>t>=0},maxHeight:{type:Number,default:null,validator:t=>t>=0},x:{type:Number,default:0},y:{type:Number,default:0},z:{type:[String,Number],default:"auto",validator:t=>"string"==typeof t?"auto"===t:t>=0},handles:{type:Array,default:()=>["tl","tm","tr","mr","br","bm","bl","ml"],validator:t=>{const i=new Set(["tl","tm","tr","mr","br","bm","bl","ml"]);return new Set(t.filter((t=>i.has(t)))).size===t.length}},dragHandle:{type:String,default:null},dragCancel:{type:String,default:null},axis:{type:String,default:"both",validator:t=>["x","y","both"].includes(t)},grid:{type:Array,default:()=>[1,1]},parent:{type:[Boolean,String],default:!1},onDragStart:{type:Function,default:()=>!0},onDrag:{type:Function,default:()=>!0},onResizeStart:{type:Function,default:()=>!0},onResize:{type:Function,default:()=>!0},isConflictCheck:{type:Boolean,default:!1},snap:{type:Boolean,default:!1},snapTolerance:{type:Number,default:5,validator:function(t){return"number"==typeof t}},scaleRatio:{type:Number,default:1,validator:t=>"number"==typeof t},handleInfo:{type:Object,default:()=>({size:8,offset:-5,switch:!0})}},data:function(){return{vLine:[],hLine:[],left:this.x,top:this.y,right:null,bottom:null,width:null,height:null,widthTouched:!1,heightTouched:!1,aspectFactor:null,parentWidth:null,parentHeight:null,minW:this.minWidth,minH:this.minHeight,maxW:this.maxWidth,maxH:this.maxHeight,handle:null,enabled:this.active,resizing:!1,dragging:!1,zIndex:this.z}},computed:{handleStyle(){return t=>{if(!this.handleInfo.switch)return{display:this.enabled?"block":"none"};const i=(this.handleInfo.size/this.scaleRatio).toFixed(2),e=(this.handleInfo.offset/this.scaleRatio).toFixed(2),s=(i/2).toFixed(2),n={tl:{top:`${e}px`,left:`${e}px`},tm:{top:`${e}px`,left:`calc(50% - ${s}px)`},tr:{top:`${e}px`,right:`${e}px`},mr:{top:`calc(50% - ${s}px)`,right:`${e}px`},br:{bottom:`${e}px`,right:`${e}px`},bm:{bottom:`${e}px`,right:`calc(50% - ${s}px)`},bl:{bottom:`${e}px`,left:`${e}px`},ml:{top:`calc(50% - ${s}px)`,left:`${e}px`}},h={width:`${i}px`,height:`${i}px`,top:n[t].top,left:n[t].left,right:n[t].right,bottom:n[t].bottom};return h.display=this.enabled?"block":"none",h}},style(){return((t,h)=>{for(var o in h||(h={}))e.call(h,o)&&n(t,o,h[o]);if(i)for(var o of i(h))s.call(h,o)&&n(t,o,h[o]);return t})({transform:`translate(${this.left}px, ${this.top}px)`,width:this.computedWidth,height:this.computedHeight,zIndex:this.zIndex},this.dragging&&this.disableUserSelect?K:q)},actualHandles(){return this.resizable?this.handles:[]},computedWidth(){return"auto"!==this.w||this.widthTouched?this.width+"px":"auto"},computedHeight(){return"auto"!==this.h||this.heightTouched?this.height+"px":"auto"},resizingOnX(){return Boolean(this.handle)&&(this.handle.includes("l")||this.handle.includes("r"))},resizingOnY(){return Boolean(this.handle)&&(this.handle.includes("t")||this.handle.includes("b"))},isCornerHandle(){return Boolean(this.handle)&&["tl","tr","br","bl"].includes(this.handle)}},watch:{active(t){this.enabled=t,t?this.$emit("activated"):this.$emit("deactivated")},z(t){(t>=0||"auto"===t)&&(this.zIndex=t)},x(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveHorizontally(t))},y(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcDragLimits()),this.moveVertically(t))},lockAspectRatio(t){this.aspectFactor=t?this.width/this.height:void 0},minWidth(t){t>0&&t<=this.width&&(this.minW=t)},minHeight(t){t>0&&t<=this.height&&(this.minH=t)},maxWidth(t){this.maxW=t},maxHeight(t){this.maxH=t},w(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeWidth(t))},h(t){this.resizing||this.dragging||(this.parent&&(this.bounds=this.calcResizeLimits()),this.changeHeight(t))}},created:function(){this.maxWidth&&this.minWidth>this.maxWidth&&console.warn("[Vdr warn]: Invalid prop: minWidth cannot be greater than maxWidth"),this.maxWidth&&this.minHeight>this.maxHeight&&console.warn("[Vdr warn]: Invalid prop: minHeight cannot be greater than maxHeight"),this.resetBoundsAndMouseState()},mounted:function(){this.enableNativeDrag||(this.$el.ondragstart=()=>!1);const[t,i]=this.getParentSize();this.parentWidth=t,this.parentHeight=i;const[e,s]=function(t){const i=window.getComputedStyle(t);return[parseFloat(i.getPropertyValue("width"),10),parseFloat(i.getPropertyValue("height"),10)]}(this.$el);this.aspectFactor=("auto"!==this.w?this.w:e)/("auto"!==this.h?this.h:s),this.width="auto"!==this.w?this.w:e,this.height="auto"!==this.h?this.h:s,this.right=this.parentWidth-this.width-this.left,this.bottom=this.parentHeight-this.height-this.top,this.settingAttribute();const n=this.$el.parentNode;F(n||document.documentElement,"mousedown",this.deselect),F(n||document.documentElement,"touchend touchcancel",this.deselect),F(window,"resize",this.checkParentSize),this.$nextTick((()=>{this.checkParentSize()}))},beforeUnmount:function(){j(document.documentElement,"mousedown",this.deselect),j(document.documentElement,"touchstart",this.handleUp),j(document.documentElement,"mousemove",this.move),j(document.documentElement,"touchmove",this.move),j(document.documentElement,"mouseup",this.handleUp),j(document.documentElement,"touchend touchcancel",this.deselect),j(window,"resize",this.checkParentSize)},methods:{onContextMenu(t){this.$emit("contextmenu",t)},resetBoundsAndMouseState(){this.mouseClickPosition={mouseX:0,mouseY:0,x:0,y:0,w:0,h:0},this.bounds={minLeft:null,maxLeft:null,minRight:null,maxRight:null,minTop:null,maxTop:null,minBottom:null,maxBottom:null}},checkParentSize(){if(this.parent){const[t,i]=this.getParentSize();this.right=t-this.width-this.left,this.bottom=i-this.height-this.top,this.parentWidth=t,this.parentHeight=i}},getParentSize(){if(!0===this.parent){const t=window.getComputedStyle(this.$el.parentNode,null);return[parseInt(t.getPropertyValue("width"),10),parseInt(t.getPropertyValue("height"),10)]}if("string"==typeof this.parent){const t=document.querySelector(this.parent);if(!(t instanceof HTMLElement))throw new Error(`The selector ${this.parent} does not match any element`);return[t.offsetWidth,t.offsetHeight]}return[null,null]},elementTouchDown(t){G=J,this.elementDown(t)},elementMouseDown(t){G=X,this.elementDown(t)},elementDown(t){if(t instanceof MouseEvent&&1!==t.which)return;const i=t.target||t.srcElement;if(this.$el.contains(i)){if(!1===this.onDragStart(t))return;if(this.dragHandle&&!I(i,this.dragHandle,this.$el)||this.dragCancel&&I(i,this.dragCancel,this.$el))return void(this.dragging=!1);this.enabled||(this.enabled=!0,this.$emit("activated"),this.$emit("update:active",!0)),this.draggable&&(this.dragging=!0),this.mouseClickPosition.mouseX=t.touches?t.touches[0].pageX:t.pageX,this.mouseClickPosition.mouseY=t.touches?t.touches[0].pageY:t.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.mouseClickPosition.w=this.width,this.mouseClickPosition.h=this.height,this.parent&&(this.bounds=this.calcDragLimits()),F(document.documentElement,G.move,this.move),F(document.documentElement,G.stop,this.handleUp)}},calcDragLimits(){return{minLeft:this.left%this.grid[0],maxLeft:Math.floor((this.parentWidth-this.width-this.left)/this.grid[0])*this.grid[0]+this.left,minRight:this.right%this.grid[0],maxRight:Math.floor((this.parentWidth-this.width-this.right)/this.grid[0])*this.grid[0]+this.right,minTop:this.top%this.grid[1],maxTop:Math.floor((this.parentHeight-this.height-this.top)/this.grid[1])*this.grid[1]+this.top,minBottom:this.bottom%this.grid[1],maxBottom:Math.floor((this.parentHeight-this.height-this.bottom)/this.grid[1])*this.grid[1]+this.bottom}},deselect(t){const i=t.target||t.srcElement,e=new RegExp(this.className+"-([trmbl]{2})","");this.$el.contains(i)||e.test(i.className)||(this.enabled&&!this.preventDeactivation&&(this.enabled=!1,this.$emit("deactivated",t),this.$emit("update:active",!1)),j(document.documentElement,G.move,this.handleResize)),this.resetBoundsAndMouseState()},handleTouchDown(t,i){G=J,this.handleDown(t,i)},handleDown(t,i){i instanceof MouseEvent&&1!==i.which||!1!==this.onResizeStart(t,i)&&(i.stopPropagation&&i.stopPropagation(),this.lockAspectRatio&&!t.includes("m")?this.handle="m"+t.substring(1):this.handle=t,this.resizing=!0,this.mouseClickPosition.mouseX=i.touches?i.touches[0].pageX:i.pageX,this.mouseClickPosition.mouseY=i.touches?i.touches[0].pageY:i.pageY,this.mouseClickPosition.left=this.left,this.mouseClickPosition.right=this.right,this.mouseClickPosition.top=this.top,this.mouseClickPosition.bottom=this.bottom,this.mouseClickPosition.w=this.width,this.mouseClickPosition.h=this.height,this.bounds=this.calcResizeLimits(),F(document.documentElement,G.move,this.handleResize),F(document.documentElement,G.stop,this.handleUp))},calcResizeLimits(){let t=this.minW,i=this.minH,e=this.maxW,s=this.maxH;const n=this.aspectFactor,[h,o]=this.grid,a=this.width,l=this.height,r=this.left,c=this.top,u=this.right,m=this.bottom;this.lockAspectRatio&&(t/i>n?i=t/n:t=n*i,e&&s?(e=Math.min(e,n*s),s=Math.min(s,e/n)):e?s=e/n:s&&(e=n*s)),e-=e%h,s-=s%o;const d={minLeft:null,maxLeft:null,minTop:null,maxTop:null,minRight:null,maxRight:null,minBottom:null,maxBottom:null};return this.parent?(d.minLeft=r%h,d.maxLeft=r+Math.floor((a-t)/h)*h,d.minTop=c%o,d.maxTop=c+Math.floor((l-i)/o)*o,d.minRight=u%h,d.maxRight=u+Math.floor((a-t)/h)*h,d.minBottom=m%o,d.maxBottom=m+Math.floor((l-i)/o)*o,e&&(d.minLeft=Math.max(d.minLeft,this.parentWidth-u-e),d.minRight=Math.max(d.minRight,this.parentWidth-r-e)),s&&(d.minTop=Math.max(d.minTop,this.parentHeight-m-s),d.minBottom=Math.max(d.minBottom,this.parentHeight-c-s)),this.lockAspectRatio&&(d.minLeft=Math.max(d.minLeft,r-c*n),d.minTop=Math.max(d.minTop,c-r/n),d.minRight=Math.max(d.minRight,u-m*n),d.minBottom=Math.max(d.minBottom,m-u/n))):(d.minLeft=null,d.maxLeft=r+Math.floor((a-t)/h)*h,d.minTop=null,d.maxTop=c+Math.floor((l-i)/o)*o,d.minRight=null,d.maxRight=u+Math.floor((a-t)/h)*h,d.minBottom=null,d.maxBottom=m+Math.floor((l-i)/o)*o,e&&(d.minLeft=-(u+e),d.minRight=-(r+e)),s&&(d.minTop=-(m+s),d.minBottom=-(c+s)),this.lockAspectRatio&&e&&s&&(d.minLeft=Math.min(d.minLeft,-(u+e)),d.minTop=Math.min(d.minTop,-(s+m)),d.minRight=Math.min(d.minRight,-r-e),d.minBottom=Math.min(d.minBottom,-c-s))),d},move(t){this.resizing?this.handleResize(t):this.dragging&&this.handleDrag(t)},handleDrag(t){return h(this,null,(function*(){const i=this.axis,e=this.grid,s=this.bounds,n=this.mouseClickPosition,h=i&&"y"!==i?n.mouseX-(t.touches?t.touches[0].pageX:t.pageX):0,o=i&&"x"!==i?n.mouseY-(t.touches?t.touches[0].pageY:t.pageY):0,[a,l]=U(e,h,o,this.scaleRatio),r=Y(n.left-a,s.minLeft,s.maxLeft),c=Y(n.top-l,s.minTop,s.maxTop);if(!1===this.onDrag(r,c))return;const u=Y(n.right+a,s.minRight,s.maxRight),m=Y(n.bottom+l,s.minBottom,s.maxBottom);this.left=r,this.top=c,this.right=u,this.bottom=m,yield this.snapCheck(),this.$emit("dragging",this.left,this.top)}))},moveHorizontally(t){const[i,e]=U(this.grid,t,this.top,this.scale),s=Y(i,this.bounds.minLeft,this.bounds.maxLeft);this.left=s,this.right=this.parentWidth-this.width-s},moveVertically(t){const[i,e]=U(this.grid,this.left,t,this.scale),s=Y(e,this.bounds.minTop,this.bounds.maxTop);this.top=s,this.bottom=this.parentHeight-this.height-s},handleResize(t){let i=this.left,e=this.top,s=this.right,n=this.bottom;const h=this.mouseClickPosition;this.lockAspectRatio;const o=this.aspectFactor,a=h.mouseX-(t.touches?t.touches[0].pageX:t.pageX),l=h.mouseY-(t.touches?t.touches[0].pageY:t.pageY);!this.widthTouched&&a&&(this.widthTouched=!0),!this.heightTouched&&l&&(this.heightTouched=!0);const[r,c]=U(this.grid,a,l,this.scaleRatio);this.handle.includes("b")?(n=Y(h.bottom+c,this.bounds.minBottom,this.bounds.maxBottom),this.lockAspectRatio&&this.resizingOnY&&(s=this.right-(this.bottom-n)*o)):this.handle.includes("t")&&(e=Y(h.top-c,this.bounds.minTop,this.bounds.maxTop),this.lockAspectRatio&&this.resizingOnY&&(i=this.left-(this.top-e)*o)),this.handle.includes("r")?(s=Y(h.right+r,this.bounds.minRight,this.bounds.maxRight),this.lockAspectRatio&&this.resizingOnX&&(n=this.bottom-(this.right-s)/o)):this.handle.includes("l")&&(i=Y(h.left-r,this.bounds.minLeft,this.bounds.maxLeft),this.lockAspectRatio&&this.resizingOnX&&(e=this.top-(this.left-i)/o));const u=O(this.parentWidth,i,s),m=V(this.parentHeight,e,n);!1!==this.onResize(this.handle,i,e,u,m)&&(this.left=i,this.top=e,this.right=s,this.bottom=n,this.width=u,this.height=m,this.$emit("resizing",this.left,this.top,this.width,this.height))},changeWidth(t){const[i,e]=U(this.grid,t,0,this.scale);let s=Y(this.parentWidth-i-this.left,this.bounds.minRight,this.bounds.maxRight),n=this.bottom;this.lockAspectRatio&&(n=this.bottom-(this.right-s)/this.aspectFactor);const h=O(this.parentWidth,this.left,s),o=V(this.parentHeight,this.top,n);this.right=s,this.bottom=n,this.width=h,this.height=o},changeHeight(t){const[i,e]=U(this.grid,0,t,this.scale);let s=Y(this.parentHeight-e-this.top,this.bounds.minBottom,this.bounds.maxBottom),n=this.right;this.lockAspectRatio&&(n=this.right-(this.bottom-s)*this.aspectFactor);const h=O(this.parentWidth,this.left,n),o=V(this.parentHeight,this.top,s);this.right=n,this.bottom=s,this.width=h,this.height=o},handleUp(t){return h(this,null,(function*(){this.handle=null;const t=new Array(3).fill({display:!1,position:"",origin:"",lineLength:""}),i={vLine:[],hLine:[]};for(let e in i)i[e]=JSON.parse(JSON.stringify(t));this.resizing&&(this.resizing=!1,yield this.conflictCheck(),this.$emit("refLineParams",i),this.$emit("resizestop",this.left,this.top,this.width,this.height)),this.dragging&&(this.dragging=!1,yield this.conflictCheck(),this.$emit("refLineParams",i),this.$emit("dragstop",this.left,this.top)),this.resetBoundsAndMouseState(),j(document.documentElement,G.move,this.handleResize)}))},settingAttribute(){this.$el.setAttribute("data-is-check",`${this.isConflictCheck}`),this.$el.setAttribute("data-is-snap",`${this.snap}`)},conflictCheck(){const t=this.top,i=this.left,e=this.width,s=this.height;if(this.isConflictCheck){const n=this.$el.parentNode.childNodes;for(let h of n)if(void 0!==h.className&&!h.className.includes(this.classNameActive)&&null!==h.getAttribute("data-is-check")&&"false"!==h.getAttribute("data-is-check")){const n=h.offsetWidth,o=h.offsetHeight;let[a,l]=this.formatTransformVal(h.style.transform);(t>=l&&i>=a&&l+o>t&&a+n>i||t<=l&&i<a&&t+s>l&&i+e>a||(i<=a&&t>=l&&i+e>a&&t<l+o||t<l&&i>a&&t+s>l&&i<a+n)||(t<=l&&i>=a&&t+s>l&&i<a+n||t>=l&&i<=a&&t<l+o&&i>a+n)||(t<=l&&i>=a&&t+s>l&&i<a+n||t>=l&&i<=a&&t<l+o&&i>a+n)||(i>=a&&t>=l&&i<a+n&&t<l+o||t>l&&i<=a&&i+e>a&&t<l+o)||(t<=l&&i>=a&&t+s>l&&i<a+n||t>=l&&i<=a&&t<l+o&&i+e>a))&&(this.top=this.mouseClickPosition.top,this.left=this.mouseClickPosition.left,this.right=this.mouseClickPosition.right,this.bottom=this.mouseClickPosition.bottom,this.width=this.mouseClickPosition.w,this.height=this.mouseClickPosition.h,this.$emit("resizing",this.left,this.top,this.width,this.height))}}},snapCheck(){return h(this,null,(function*(){let t=this.width,i=this.height;if(this.snap){let e=this.left,s=this.left+t,n=this.top,h=this.top+i;const o=new Array(3).fill({display:!1,position:"",origin:"",lineLength:""}),a={vLine:[],hLine:[]};for(let t in a)a[t]=JSON.parse(JSON.stringify(o));const l=this.$el.parentNode.childNodes;let r={value:{x:[[],[],[]],y:[[],[],[]]},display:[],position:[]};const{groupWidth:c,groupHeight:u,groupLeft:m,groupTop:d,bln:p}=yield this.getActiveAll(l);p||(t=c,i=u,e=m,s=m+c,n=d,h=d+u);for(let g of l)if(void 0!==g.className&&!g.className.includes(this.classNameActive)&&null!==g.getAttribute("data-is-snap")&&"false"!==g.getAttribute("data-is-snap")){const o=g.offsetWidth,l=g.offsetHeight,[c,u]=this.formatTransformVal(g.style.transform),m=c+o,d=u+l,f=Math.abs(n+i/2-(u+l/2))<=this.snapTolerance,b=Math.abs(e+t/2-(c+o/2))<=this.snapTolerance,v=Math.abs(u-h)<=this.snapTolerance,x=Math.abs(d-h)<=this.snapTolerance,y=Math.abs(u-n)<=this.snapTolerance,w=Math.abs(d-n)<=this.snapTolerance,M=Math.abs(c-s)<=this.snapTolerance,L=Math.abs(m-s)<=this.snapTolerance,z=Math.abs(c-e)<=this.snapTolerance,R=Math.abs(m-e)<=this.snapTolerance;r.display=[v,x,y,w,f,f,M,L,z,R,b,b],r.position=[u,d,u,d,u+l/2,u+l/2,c,m,c,m,c+o/2,c+o/2],v&&(p&&(this.top=Math.max(u-i,this.bounds.minTop),this.bottom=this.parentHeight-this.top-i),r.value.y[0].push(c,m,e,s)),y&&(p&&(this.top=u,this.bottom=this.parentHeight-this.top-i),r.value.y[0].push(c,m,e,s)),x&&(p&&(this.top=Math.max(d-i,this.bounds.minTop),this.bottom=this.parentHeight-this.top-i),r.value.y[1].push(c,m,e,s)),w&&(p&&(this.top=d,this.bottom=this.parentHeight-this.top-i),r.value.y[1].push(c,m,e,s)),M&&(p&&(this.left=Math.max(c-t,this.bounds.minLeft),this.right=this.parentWidth-this.left-t),r.value.x[0].push(u,d,n,h)),z&&(p&&(this.left=c,this.right=this.parentWidth-this.left-t),r.value.x[0].push(u,d,n,h)),L&&(p&&(this.left=Math.max(m-t,this.bounds.minLeft),this.right=this.parentWidth-this.left-t),r.value.x[1].push(u,d,n,h)),R&&(p&&(this.left=m,this.right=this.parentWidth-this.left-t),r.value.x[1].push(u,d,n,h)),f&&(p&&(this.top=Math.max(u+l/2-i/2,this.bounds.minTop),this.bottom=this.parentHeight-this.top-i),r.value.y[2].push(c,m,e,s)),b&&(p&&(this.left=Math.max(c+o/2-t/2,this.bounds.minLeft),this.right=this.parentWidth-this.left-t),r.value.x[2].push(u,d,n,h));const k=[0,1,0,1,2,2,0,1,0,1,2,2];for(let t=0;t<=k.length;t++){const i=t<6?"y":"x",e=t<6?"hLine":"vLine";if(r.display[t]){const{origin:s,length:n}=this.calcLineValues(r.value[i][k[t]]);a[e][k[t]].display=r.display[t],a[e][k[t]].position=r.position[t]+"px",a[e][k[t]].origin=s,a[e][k[t]].lineLength=n}}}this.$emit("refLineParams",a)}}))},calcLineValues:t=>({length:Math.max(...t)-Math.min(...t)+"px",origin:Math.min(...t)+"px"}),getActiveAll(t){return h(this,null,(function*(){const i=[],e=[],s=[];let n=0,h=0,o=0,a=0;for(let r of t)void 0!==r.className&&r.className.includes(this.classNameActive)&&i.push(r);const l=i.length;if(l>1){for(let t of i){const i=t.offsetLeft,n=i+t.offsetWidth,h=t.offsetTop,o=h+t.offsetHeight;e.push(h,o),s.push(i,n)}n=Math.max(...s)-Math.min(...s),h=Math.max(...e)-Math.min(...e),o=Math.min(...s),a=Math.min(...e)}return{groupWidth:n,groupHeight:h,groupLeft:o,groupTop:a,bln:1===l}}))},formatTransformVal(t){let[i,e]=t.replace(/[^0-9\-,]/g,"").split(",");return void 0===e&&(e=0),[+i,+e]}}},Z=["onMousedown","onTouchstart"];const tt=$(Q,[["render",function(t,i,e,s,n,h){return l(),r("div",{style:p(h.style),class:f([{[e.classNameActive]:t.enabled,[e.classNameDragging]:t.dragging,[e.classNameResizing]:t.resizing,[e.classNameDraggable]:e.draggable,[e.classNameResizable]:e.resizable},e.className]),onMousedown:i[0]||(i[0]=(...t)=>h.elementMouseDown&&h.elementMouseDown(...t)),onTouchstart:i[1]||(i[1]=(...t)=>h.elementTouchDown&&h.elementTouchDown(...t)),onContextmenu:i[2]||(i[2]=(...t)=>h.onContextMenu&&h.onContextMenu(...t))},[(l(!0),r(c,null,u(h.actualHandles,(i=>(l(),r("div",{key:i,class:f([e.classNameHandle,e.classNameHandle+"-"+i]),style:p(h.handleStyle(i)),onMousedown:b((t=>h.handleDown(i,t)),["stop","prevent"]),onTouchstart:b((t=>h.handleTouchDown(i,t)),["stop","prevent"])},[v(t.$slots,i)],46,Z)))),128)),v(t.$slots,"default")],38)}]]),it=x((()=>N((()=>import("./line-3ce16315.js")),["assets/line-3ce16315.js","assets/line.vue_vue_type_script_setup_true_lang-9395e784.js","assets/index-ed52a11e.js","assets/echart-e2e41c78.js","assets/index-f6ea771a.js","assets/index-474d4c88.js","assets/core-e904f21d.js","assets/ui-3973d019.js","assets/index-f5064daf.css","assets/index-f35891fd.css"]))),et=x((()=>N((()=>import("./bar-7d2fd048.js")),["assets/bar-7d2fd048.js","assets/bar.vue_vue_type_script_setup_true_lang-e4eb54b4.js","assets/index-ed52a11e.js","assets/echart-e2e41c78.js","assets/index-f6ea771a.js","assets/index-474d4c88.js","assets/core-e904f21d.js","assets/ui-3973d019.js","assets/index-f5064daf.css","assets/index-f35891fd.css"]))),st=x((()=>N((()=>import("./overview-a968affc.js")),["assets/overview-a968affc.js","assets/index-ed52a11e.js","assets/echart-e2e41c78.js","assets/index-f6ea771a.js","assets/index-474d4c88.js","assets/core-e904f21d.js","assets/ui-3973d019.js","assets/index-f5064daf.css","assets/index-f35891fd.css","assets/overview-649c3707.css","assets/index-58aa3c2a.css"]))),nt={class:"content"},ht={class:"drag-column"},ot={class:"target-coulumn"},at={class:"vdr-content"},lt=$(a({__name:"index",setup(t){const i=[{label:"测试"}],e=y((()=>s.value.filter((t=>t.active)).length>1)),s=w([{id:W(),initW:100,initY:100,x:100,y:100,w:100,h:120,active:!0,component:M(st)},{id:W(),initW:100,initY:100,x:250,y:100,w:100,h:120,active:!1,component:M(it)},{id:W(),initW:100,initY:100,x:400,y:100,w:100,h:120,active:!1,component:M(et)}]),n=w(0),h=w(0);function o(t,i,o){if(!e.value)return;const a=i-s.value[t].x,l=o-s.value[t].y,r=function(t){const i=t-n.value;return n.value=t,i}(a),c=function(t){const i=t-h.value;return h.value=t,i}(l);s.value.forEach(((i,e)=>{i.active&&e!==t&&(i.x+=r,i.y+=c)}))}return(t,a)=>{const m=tt,d=E;return l(),r("div",nt,[L("div",ht,[(l(),r(c,null,u(i,(t=>L("div",{key:t.label,class:"drag-item"},z(t.label),1))),64))]),L("div",ot,[(l(!0),r(c,null,u(g(s),((t,i)=>(l(),R(m,{key:t.id,x:t.x,"onUpdate:x":i=>t.x=i,y:t.y,"onUpdate:y":i=>t.y=i,w:t.w,"onUpdate:w":i=>t.w=i,h:t.h,"onUpdate:h":i=>t.h=i,active:t.active,"onUpdate:active":i=>t.active=i,grid:[2,2],"init-w":t.initW,"init-h":t.initY,draggable:!0,resizable:!0,parent:!0,"is-conflict-check":!1,snap:!0,"snap-tolerance":10,onDragging:(t,e)=>o(i,t,e),onDragstop:(t,i)=>function(t,i,e){console.log("=======",i),n.value=0,h.value=0}(0,t),onResizing:i=>{return e=t.id,void P.emit(C,e);var e},onDeactivated:t=>function(t,i){S((()=>{var n;t&&((null==t?void 0:t.ctrlKey)&&(s.value[i].active=!0),e.value&&"target-coulumn"!==(null==(n=null==t?void 0:t.target)?void 0:n.className)&&(s.value[i].active=!0))}))}(t,i),onRefLineParams:g(B)().setValue},{default:k((()=>[L("div",at,[(l(),R(T(t.component),{id:t.id},null,8,["id"]))])])),_:2},1032,["x","onUpdate:x","y","onUpdate:y","w","onUpdate:w","h","onUpdate:h","active","onUpdate:active","init-w","init-h","onDragging","onDragstop","onResizing","onDeactivated","onRefLineParams"])))),128)),H(d)])])}}}),[["__scopeId","data-v-0fd0e637"]]);export{lt as default};
